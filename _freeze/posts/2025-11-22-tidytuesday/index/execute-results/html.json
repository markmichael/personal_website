{
  "hash": "75a1d5c4060979863db52b843a858c5a",
  "result": {
    "engine": "knitr",
    "markdown": "\n---\ntitle: \"TidyTuesday 2025-11-18 - Sherlock Holmes\"\ndate: \"2025-11-22\"\ncategories: [\"data science\", \"tidytuesday\", \"rstats\"]\n---\n\n## The Complete Works of Sherlock Holmes\n\n### Introduction\n\n\n\n\n\n\n\nAnalysing literature with data science and numerical methods is a fun journey. A few years ago I read [Nabokov's favorite word is mauve](https://www.goodreads.com/book/show/30753786-nabokov-s-favorite-word-is-mauve) by Ben Blatt. The methods for quantifying literature are both interesting and compelling, and I'm interested in seeing if there are similar patterns here. Sidenote: that book was described to me as \"the most NPR book ever,\" and I love that.\n\nMy first step is to explore samples of the data to see if it's usable as is.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbooks <- data |>\n  distinct(book) |>\n  mutate(publish_order = row_number())\nprint(books)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 48 × 2\n   book                                publish_order\n   <chr>                                       <int>\n 1 A Study In Scarlet                              1\n 2 The Sign of the Four                            2\n 3 A Scandal in Bohemia                            3\n 4 The Red-Headed League                           4\n 5 A Case of Identity                              5\n 6 The Boscombe Valley Mystery                     6\n 7 The Five Orange Pips                            7\n 8 The Man with the Twisted Lip                    8\n 9 The Adventure of the Blue Carbuncle             9\n10 The Adventure of the Speckled Band             10\n# ℹ 38 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ntext_sample <- data[2000:2100,]\n\nprint(text_sample)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 101 × 3\n   book               text                                              line_num\n   <chr>              <chr>                                                <dbl>\n 1 A Study In Scarlet \"\\\"'You had best tell me all about it now,' I sa…     2000\n 2 A Study In Scarlet \"are worse than none. Besides, you do not know h…     2001\n 3 A Study In Scarlet \"it.'\"                                                2002\n 4 A Study In Scarlet  <NA>                                                 2003\n 5 A Study In Scarlet \"\\\"'On your head be it, Alice!' cried her mother…     2004\n 6 A Study In Scarlet \"me, 'I will tell you all, sir. Do not imagine t…     2005\n 7 A Study In Scarlet \"behalf of my son arises from any fear lest he s…     2006\n 8 A Study In Scarlet \"in this terrible affair. He is utterly innocent…     2007\n 9 A Study In Scarlet \"however, that in your eyes and in the eyes of o…     2008\n10 A Study In Scarlet \"be compromised. That however is surely impossib…     2009\n# ℹ 91 more rows\n```\n\n\n:::\n:::\n\n\nThe most remarkable thing from the sample is that each observation represents a literal line in the novel. The lines can be concatenated so that each observation is a paragraph. This will be particularly useful in understanding dialog because it is typical in literature to start a new paragraph each time a speaker changes. The NAs between lines mean we have a good boundary between paragraphs.\n\nAdditionally, I cross-referenced the novel order with the [Canon of Sherlock Holmes](https://en.wikipedia.org/wiki/Canon_of_Sherlock_Holmes) in order to understand the order in which these works were published. I think it could be interesting to see if there are changes that occur between earlier works and later works.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nparagraphs <- data |>\n  mutate(paragraph = cumsum(is.na(text))) |>\n  filter(!is.na(text)) |>\n  group_by(book,paragraph) |>\n  summarize(text = paste(text, collapse = \" \"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'book'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code}\nparagraphs_sample <- paragraphs[2000:2010,]\n\nprint(paragraphs_sample)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 11 × 3\n# Groups:   book [1]\n   book                                        paragraph text                   \n   <chr>                                           <int> <chr>                  \n 1 The Adventure of Charles Augustus Milverton      7455 \"\\\"What I say is true,…\n 2 The Adventure of Charles Augustus Milverton      7456 \"\\\"There you make a mi…\n 3 The Adventure of Charles Augustus Milverton      7457 \"Holmes sprang from hi…\n 4 The Adventure of Charles Augustus Milverton      7458 \"\\\"Get behind him, Wat…\n 5 The Adventure of Charles Augustus Milverton      7459 \"Milverton had glided …\n 6 The Adventure of Charles Augustus Milverton      7460 \"\\\"Mr. Holmes, Mr. Hol…\n 7 The Adventure of Charles Augustus Milverton      7461 \"Holmes sat motionless…\n 8 The Adventure of Charles Augustus Milverton      7462 \"For some days Holmes …\n 9 The Adventure of Charles Augustus Milverton      7463 \"\\\"You would not call …\n10 The Adventure of Charles Augustus Milverton      7464 \"\\\"No, indeed!\\\"\"      \n11 The Adventure of Charles Augustus Milverton      7465 \"\\\"You'll be intereste…\n```\n\n\n:::\n:::\n\n\n### Exclamation points \n\nF. Scott Fitzgerald and Earnest Hemingway were known for their very resvered use of exclamation points. Fizgerald describes it as \"Laughing at your own joke.\" We can use this data to determine how well Arthur Conan Doyle follows this rule.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexclamation_points <- paragraphs |>\n  mutate(exclamation_points = str_count(text, \"!\"))\n\nexclamation_point_sample <- exclamation_points |>\n  filter(exclamation_points > 0) |>\n  slice_sample(n = 5)\n\n### showing some example lines as a sanity check to make sure our code is working\n\nprint(exclamation_point_sample)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 240 × 4\n# Groups:   book [48]\n   book                 paragraph text                        exclamation_points\n   <chr>                    <int> <chr>                                    <int>\n 1 A Case of Identity        2195 \"\\\"Certainly,\\\" said Holme…                  1\n 2 A Case of Identity        2131 \"\\\"Ha! that was unfortunat…                  1\n 3 A Case of Identity        2197 \"\\\"Oh, it won't do--really…                  1\n 4 A Case of Identity        2207 \"\\\"There's a cold-blooded …                  1\n 5 A Case of Identity        2196 \"\\\"What! where?\\\" shouted …                  1\n 6 A Scandal in Bohemia      1847 \"\\\"What a woman--oh, what …                  1\n 7 A Scandal in Bohemia      1671 \"\\\"Pooh, pooh! Forgery.\\\"\"                   1\n 8 A Scandal in Bohemia      1754 \"\\\"Oh, the cause is excell…                  1\n 9 A Scandal in Bohemia      1829 \"\\\"Married! When?\\\"\"                         1\n10 A Scandal in Bohemia      1621 \"\\\"Quite so! You have not …                  1\n# ℹ 230 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\nexclamation_points_summary <- exclamation_points |>\n  group_by(book) |>\n  summarize(exclamation_points = sum(exclamation_points)) |>\n  left_join(books, by = \"book\") |>\n  arrange(desc(exclamation_points))\n\n### actually counting exclamation points\n\nprint(exclamation_points_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 48 × 3\n   book                                        exclamation_points publish_order\n   <chr>                                                    <int>         <int>\n 1 The Valley Of Fear                                         319            40\n 2 The Hound of the Baskervilles                              182            39\n 3 The Sign of the Four                                       127             2\n 4 A Study In Scarlet                                          85             1\n 5 The Adventure of the Second Stain                           49            38\n 6 The Adventure of the Solitary Cyclist                       48            29\n 7 The Adventure of the Red Circle                             46            43\n 8 The Adventure of the Dying Detective                        45            45\n 9 The Adventure of the Beryl Coronet                          43            13\n10 The Adventure of the Bruce-Partington Plans                 43            44\n# ℹ 38 more rows\n```\n\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}