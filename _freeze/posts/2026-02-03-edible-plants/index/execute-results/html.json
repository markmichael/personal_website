{
  "hash": "6bd41c62edb6b4bbe541c1ab43c4870d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"TidyTuesday 2026-02-03 Edible Plants\"\ndate: \"2026-02-03\"\ncategories: [\"data science\", \"tidytuesday\", \"rstats\"]\n---\n\n\nTidyTuesday is a weekly data visualization challenge. The details for this week can be found [here](https://github.com/rfordatascience/tidytuesday/tree/main/data/2026/2026-02-03).\n\n### Introduction\n\nThis week we're looking at edible plants. I'm interested in understanding the relationship between sun and water requirements and the caloric content of the plant. Generally I would expect that if a plant needs more energy from the sun, it's because it is storing more sugars in it's fruit. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::opts_chunk$set(echo = TRUE)\nlibrary(tidyverse)\n```\n:::\n\n\nI use the tidytuesdayR package to load the data the first time. Then I store it locally in a csv.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants <- tidytuesdayR::tt_load(\"2026-02-03\")[[1]]\nwrite_csv(edible_plants, \"edible_plants.csv\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants <- read_csv(\"edible_plants.csv\", show_col_types = FALSE) |>\n  mutate(sunlight = tolower(sunlight) |> str_replace_all(\"/ \", \"/\") |> factor())\n\nedible_plants$water <- factor(edible_plants$water, levels= c(\"Very Low\", \"Low\", \"Medium\", \"High\", \"Very High\"))\n```\n:::\n\n\n\n### Exploring columns of interest\n\nLet's look at the values in the sunlight, water, and energy columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants |>\n  select(sunlight, water, energy, nutrients) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 140\nColumns: 4\n$ sunlight  <fct> full sun, full sun, full sun, full sun/partial shade/full sh…\n$ water     <fct> Very High, Medium, Medium, Very Low, High, Medium, Medium, M…\n$ energy    <dbl> 80, 27, 27, 88, 25, 34, 35, 31, 50, NA, NA, NA, NA, NA, NA, …\n$ nutrients <chr> \"Medium\", \"Medium\", \"Medium\", \"Medium\", \"High\", \"High\", \"Hig…\n```\n\n\n:::\n:::\n\n\nIt looks like there are a lot of NA values for energy, but we can probably use nutrients as a another output measurement. Also our inputs are going to be factors not numbers. This will impact the types of analyses we can use.\n\nLet's start with a basic visualization for the non-NA energy content plants.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants |>\n  filter(!is.na(energy)) |>\n  ggplot(aes(x = water, y = energy)) +\n  facet_grid(rows = vars(sunlight)) +\n  geom_boxplot() +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/basic_analysis-1.png){width=672}\n:::\n:::\n\n\nCouple notable things here:\n\n1. It looks the ability to tolerate shade is correlated with a lower caloric content.\n2. A surprising outlier, broad beans, or fava beans, can grow in full shade, with low water, and have the highest caloric content.\n\nIf we had more energy values, we could formalize our observations with a [two-way ANOVA](https://statsandr.com/blog/two-way-anova-in-r/).\n\n\nInstead, let's look at the nutrients dependent variable. Because this is categorical as well, we'll use an [ordinal logistic regression](https://stats.oarc.ucla.edu/r/dae/ordinal-logistic-regression/). It's important to note that nutrients isn't a replacement for the energy variable. It describes the nutrient needs for the plant to grow. So a reasonable hypothesis is that if you have plenty of sun and water, you can don't need to rely on extra nutrients in the soil.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants <- edible_plants |>\n  filter(nutrients %in% c(\"Low\", \"Medium\", \"High\"))\nedible_plants$nutrients <- factor(edible_plants$nutrients, levels = c(\"Low\", \"Medium\", \"High\"))\nm <-MASS::polr(nutrients ~ sunlight + water, data = edible_plants, Hess = TRUE)\nsummary(m)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\nMASS::polr(formula = nutrients ~ sunlight + water, data = edible_plants, \n    Hess = TRUE)\n\nCoefficients:\n                                             Value Std. Error t value\nsunlightfull sun/partial shade             -0.8533     0.3881  -2.199\nsunlightfull sun/partial shade/full shade -28.1526     1.4209 -19.813\nsunlightpartial shade                      -0.8243     0.8149  -1.012\nwaterLow                                  -31.1595     0.7538 -41.336\nwaterMedium                               -28.1510     0.4607 -61.104\nwaterHigh                                 -26.7838     0.5692 -47.058\nwaterVery High                            -28.1526     1.4209 -19.813\n\nIntercepts:\n            Value    Std. Error t value \nLow|Medium  -29.3183   0.4370   -67.0915\nMedium|High -26.9870   0.4527   -59.6119\n\nResidual Deviance: 238.4313 \nAIC: 256.4313 \n(2 observations deleted due to missingness)\n```\n\n\n:::\n:::\n\n\nThe reference values here are \"Full Sun\" and \"Very Low [water]\". What we see here is the opposite. The ability to tolerate full shade suggests a lower nutrient requirement. Similarly any amount of water beyond \"Very Low\" suggests a lower nutrient requirement. Maybe the better way to think about it is that sunlight or derivative sugar molecules are used with the nutrients in biochemical reactions.\n\nWe can represent this visually here:\n\n::: {.cell}\n\n```{.r .cell-code}\nedible_plants |>\n  filter(nutrients %in% c(\"Low\", \"Medium\", \"High\")) |>\n  filter(!is.na(water)) |>\n  ggplot(aes(x = nutrients)) +\n  facet_grid(rows = vars(sunlight), cols = vars(water)) +\n  geom_bar() +\n  theme_light() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/nutrient_plot-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}